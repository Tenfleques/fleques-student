(this["webpackJsonpfleques-student"]=this["webpackJsonpfleques-student"]||[]).push([[0],{26:function(e){e.exports=JSON.parse('{"_appname":{"title":"Fleques Student","description":"application title"},"_description":{"title":"","description":""},"_transcript_wizard":{"title":"Transcript Wizard","description":""},"_home_lead":{"title":"Welcome to Fleques Student platform","description":"the welcome text on the home page"}}')},27:function(e){e.exports=JSON.parse('{"_appname":{"title":"Fleques \u0421\u0442\u0443\u0434\u0435\u043d\u0442","description":"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f"},"_description":{"title":"","description":""},"_transcript_tool":{"title":"\u0412\u043e\u043b\u0448\u0435\u0431\u043d\u0438\u043a \u0442\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432","description":""},"_home_lead":{"title":"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0435 Fleques \u0421\u0442\u0443\u0434\u0435\u043d\u0442","description":""}}')},30:function(e){e.exports=JSON.parse('{"columns":[{"field":"id","title":"No.","class":"col-1"},{"field":"discipline","title":"Discipline","class":"col"},{"field":"num_hours","title":"Number of hours","class":"col-2"},{"field":"type_of_assesment","title":"Type of assesment","class":"col-2"},{"field":"grade","title":"Grade","class":"col-2"}]}')},31:function(e){e.exports=JSON.parse("[]")},32:function(e){e.exports=JSON.parse('[{"caption":"_appname","link":"/"},{"caption":"_transcript_wizard","link":"/transcript_wizard"}]')},33:function(e,t,a){e.exports=a(47)},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(25),s=a.n(i),r=a(6),l=a(7),c=a(9),u=a(8),m=a(10),p=a(14),d=a(12);function h(){return o.a.createElement("div",{className:""},o.a.createElement("div",{className:"container-fluid mt-5"},o.a.createElement("div",{className:"col-12 h3"}),o.a.createElement("div",{className:"col-12"})))}var f={en:a(26),ru:a(27)};function v(){var e=localStorage.getItem("_locale")||navigator.language||navigator.userLanguage||"ru";return o.a.createElement("div",{className:""},o.a.createElement("div",{className:"container-fluid mt-5"},o.a.createElement("div",{className:"col-12 h3"},f[e]._home_lead.title),o.a.createElement("div",{className:"col-12"},f[e]._description.title)))}var b=a(17),g=a(3),k=a(18),N=a(20),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={login:"",password:"",submitted:!1,user:{},error:!1},a.handleChange=a.handleChange.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){sessionStorage.removeItem("user")}},{key:"handleChange",value:function(e){var t,a=e.target,n=a.name,o=a.value;this.setState((t={},Object(b.a)(t,n,o),Object(b.a)(t,"submitted",!1),t))}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"renderLoginForm",value:function(){var e=this.state,t=e.login,a=e.password,n=e.submitted,i=e.error;return o.a.createElement("div",{className:"container p-5"},o.a.createElement("form",{className:"row mt-5 p-md-5 bg-primary text-white max-w-600px mx-auto",onSubmit:this.handleSubmit},o.a.createElement("div",{className:i?"col-12 text-danger":"invisible col-12"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d"),o.a.createElement("div",{className:"form-group col-12"},o.a.createElement("label",{htmlFor:"login"},"\u043b\u043e\u0433\u0438\u043d"),o.a.createElement("input",{type:"text",name:"login",value:t,className:"form-control col-12 mb-3"+(n&&!t?" border-danger":""),onChange:this.handleChange}),n&&!t&&o.a.createElement("div",{className:"text-danger"},"\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u043d\u0430\u044f \u043f\u043e\u043b\u044f")),o.a.createElement("div",{className:"form-group col-12"},o.a.createElement("label",{htmlFor:"password"},"\u043f\u0430\u0440\u043e\u043b\u044c"),o.a.createElement("input",{type:"password",name:"password",value:a,className:"form-control col-12 mb-3"+(n&&!a?" border-danger":""),onChange:this.handleChange}),n&&!a&&o.a.createElement("div",{className:"text-danger"},"\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u043d\u0430\u044f \u043f\u043e\u043b\u044f")),o.a.createElement("div",{className:"form-group col-12"},o.a.createElement("button",{type:"submit",className:"form-control col-12 mb-3"},"\u0412\u043e\u0439\u0442\u0438 \xa0",n?o.a.createElement(k.a,{icon:N.b,className:i?"text-danger d-none":"d-none"}):"",n?o.a.createElement(k.a,{icon:N.a,className:i?"d-none":"text-success"}):""))))}},{key:"render",value:function(){return this.state.user.token?o.a.createElement(d.a,{to:{pathname:"/",state:{from:"/login"}}}):this.renderLoginForm()}}]),t}(o.a.Component),_=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={options:e.options,filtered_options:[]},a.autoComplete=a.autoComplete.bind(Object(g.a)(a)),a.onClick=a.onClick.bind(Object(g.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.options.length!==this.props.options.length&&(this.props.filtered_options.length?this.setState({options:this.props.options,filtered_options:this.props.options}):this.setState({options:this.props.options}))}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){"BUTTON"!==e.target.nodeName&&"INPUT"!==e.target.nodeName&&this.setState({filtered_options:[]})}},{key:"onClick",value:function(e){"BUTTON"!==e.target.nodeName&&"INPUT"!==e.target.nodeName&&this.setState({filtered_options:[]})}},{key:"autoComplete",value:function(e){var t=e.target.value,a=this.props.filterFunc?this.props.filterFunc(t,this.state.options):this.state.filtered_options;this.setState({filtered_options:a})}},{key:"render",value:function(){return o.a.createElement("div",{className:"row",onClick:this.onClick},o.a.createElement("div",{className:this.props.className+"  z-1000 bg-white"},o.a.createElement("label",{htmlFor:this.props.name},this.props.caption),o.a.createElement("input",{type:"text",className:"form-control",onInput:this.autoComplete,onChange:this.props.onChange,id:this.props.name,name:this.props.name,value:this.props.value,placeholder:this.props.placeholder}),o.a.createElement("span",{className:"muted small"},this.props.help)),o.a.createElement("div",{className:this.props.optionsDropdownClass+" absolute-float"},this.props.formatOptions?this.props.formatOptions(this.state.filtered_options,this.props.onClickElement):""))}}]),t}(n.Component);var O={TextUtilities:{similarity:function(e,t){var a=e,n=t;e.length<t.length&&(a=t,n=e);var o=a.length;return 0===o?1:(o-function(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var a=[],n=0;n<=e.length;n++){for(var o=n,i=0;i<=t.length;i++)if(0===n)a[i]=i;else if(i>0){var s=a[i-1];e.charAt(n-1)!==t.charAt(i-1)&&(s=Math.min(Math.min(s,o),a[i])+1),a[i-1]=o,o=s}n>0&&(a[t.length]=o)}return a[t.length]}(a,n))/parseFloat(o)},hashCode:function(e){var t,a=0;if(0===e.length)return a;for(t=0;t<this.length;t++)a=(a<<5)-a+e.charCodeAt(t),a|=0;return Math.abs(a)}}},y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={columns:e.columns,data:e.data,title:e.title,page:0,rows:e.rows},a.onClickPagination=a.onClickPagination.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"fleques_large_table_columns",value:function(){return o.a.createElement("div",{className:this.props.headerClass+" pb-4 z-200 sticky-columns text-center"},o.a.createElement("div",{className:"row px-3"},o.a.createElement("div",{className:"col-12 h6 text-left"},this.props.title||""),this.state.columns.map((function(e){return o.a.createElement("div",{key:"col_"+e.field,className:e.class||"col "},e.title)}))))}},{key:"fleques_large_table_rows",value:function(){for(var e=this,t=[],a=this.state.page*this.state.rows,n=Math.min(a+this.state.rows,this.state.data.length),i=a;i<n;++i)t.push(o.a.createElement("div",{key:"row_"+i,className:" row border-bottom py-2 px-3"},this.state.columns.map((function(t){return o.a.createElement("div",{key:"cell_"+t.field,className:t.class||"col"},e.state.data[i][t.field])}))));return t.push(o.a.createElement("div",{key:"row_pagination",className:" row py-2 px-3 "}," ",this.flequesGetPagination())),t}},{key:"onClickPagination",value:function(e){this.setState({page:e})}},{key:"flequesGetPagination",value:function(){for(var e=this,t=Math.floor(this.state.data.length/this.state.rows)+(this.state.data.length%this.state.rows?1:0),a=[],n=function(t){a.push(o.a.createElement("span",{key:"page_"+t,className:"btn btn-transparent mx-0 text-muted text-small"+(e.state.page===t?" bg-primary text-white":""),onClick:function(){return e.onClickPagination(t)}},t+1))},i=0;i<t;++i)n(i);return a}},{key:"componentDidUpdate",value:function(e){this.props!==e&&this.setState({columns:this.props.columns,data:this.props.data,title:this.props.title})}},{key:"render",value:function(){var e=this.fleques_large_table_columns("bg-primary"),t=this.fleques_large_table_rows();return o.a.createElement("div",{className:this.props.className},e,t)}}]),t}(n.Component),w=a(30);var C=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={options:[],selected_options:[],table:{columns:w.columns,data:[],title:"Extract from the progress record book"},table_header:{student:{},faculty:{},speciality:{},form_of_training:{}}},a.onChangeSelect=a.onChangeSelect.bind(Object(g.a)(a)),a.onClickOption=a.onClickOption.bind(Object(g.a)(a)),a.formatOptions=a.formatOptions.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onChangeSelect",value:function(e){}},{key:"onClickOption",value:function(e){var t=this.state.selected_options,a=e.target.dataset.key;t.push(this.state.options[a]),this.setState({selected_options:t},(function(){}))}},{key:"formatOptions",value:function(e,t){var a=this;return e.filter((function(e){return e&&!a.state.selected_options.includes(e)})).map((function(e){return o.a.createElement("button",{key:e.value,"data-key":e.value,className:"dropdown-item",onClick:t},e.label)}))}},{key:"formatTableRows",value:function(){return this.state.selected_options.filter((function(e){return null!==e})).map((function(e,t){return{id:t+1,discipline:e.en,num_hours:"",type_of_assesment:"",turnout:"",grade:""}}))}},{key:"optionsFilterFunction",value:function(e,t){return 0===e.length?[]:t.filter((function(e){return null!==e})).map((function(t){for(var a=[0],n=0;n<t.label.length-e.length;++n){var o=O.TextUtilities.similarity(t.label.slice(n,n+e.length),e);a.push(o)}for(var i=0;i<t.department[0].length-e.length;++i){var s=O.TextUtilities.similarity(t.department[0].slice(i,i+e.length),e);a.push(s)}return t.order=Math.max.apply(null,a),t})).filter((function(e){return e.order>.5})).sort((function(e,t){return t.order-e.order}))}},{key:"componentDidMount",value:function(){var e=this;fetch("/data/translations.csv").then((function(e){return e.text()})).then((function(t){var a=function(e){for(var t=e.split("\n"),a=null,n=[],o=0;o<t.length;++o){var i=t[o].split(";");n[o]=null,2===i.length&&(i[0].includes("\u041a\u0430\u0444\u0435\u0434\u0440\u0430")?a=i:n[o]={department:a,label:i[0],ru:i[0],en:i[1],value:o})}return n}(t);e.setState({options:a})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row mt-5"},o.a.createElement("div",{className:"col-12 my-3"},o.a.createElement(_,{options:this.state.options,filtered_options:[],filterFunc:this.optionsFilterFunction,formatOptions:this.formatOptions,onClickElement:this.onClickOption,className:"col-12 col-md-5",optionsDropdownClass:"bg-white z-1000 col-10 border-right",name:"filter-disciplines"})),o.a.createElement("div",{className:"col-12 mt-3"},o.a.createElement(y,{columns:this.state.table.columns,data:this.formatTableRows(),rows:"10",title:this.state.table.title}))))}}]),t}(n.Component),x=function(e){var t=localStorage.getItem("_locale")||navigator.language||navigator.userLanguage||"ru",a=Object(d.f)();return o.a.createElement("nav",{className:"navbar navbar-dark bg-primary fixed-top "+e.className},e.navs.map((function(e){return o.a.createElement(p.b,{key:e.link,className:"nav-item text-white no-underline "+(a.pathname===e.link?"border-bottom border-2x border-danger":""),to:e.link},f[t][e.caption].title)})))},j=a(31),S=a(32),F=(a(45),a(46),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,{basename:""},sessionStorage.getItem("user")&&o.a.createElement(x,{navs:j,className:"mb-5"})||o.a.createElement(x,{navs:S,className:"mb-5"}),o.a.createElement(d.b,{exact:!0,strict:!0,path:"/login",component:E}),o.a.createElement(d.b,{exact:!0,path:"/",component:v}),o.a.createElement(d.b,{exact:!0,strict:!0,path:"/transcript_wizard",component:C}),o.a.createElement(d.b,{exact:!0,strict:!0,path:"/support",component:h}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.392ffed0.chunk.js.map